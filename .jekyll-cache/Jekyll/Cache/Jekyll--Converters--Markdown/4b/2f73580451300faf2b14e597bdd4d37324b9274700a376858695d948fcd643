I"ÿ&<h3 id="roje-pszczÃ³Å‚-zamiast-chmur-punktÃ³w">Roje pszczÃ³Å‚ zamiast chmur punktÃ³w</h3>

<p>Przy wiÄ™kszej liczbie obserwacji wykresy punktowe bywajÄ… nieczytelne. Losowe przesuwanie punktÃ³w (geom_point(position = â€œjitterâ€)) w ggplot2 nie wyglÄ…da zbyt estetycznie, poza tym punkty caÅ‚y czas mogÄ… na siebie nachodziÄ‡. Prostym rozwiÄ…zaniem jest zastosowanie pakietu <a href="https://github.com/eclarke/ggbeeswarm">ggbeeswarm</a>, ktÃ³ry zawiera kilka geometrii tworzÄ…cych estetyczne i informatywne wykresy punktowe.</p>

<p>FunkcjonalnoÅ›Ä‡ pakietu beeswarm najlepiej zaprezentowaÄ‡ na przykÅ‚adzie - w tym przypadku dochodzie netto mieszkaÅ„cÃ³w duÅ¼ych miast (powyÅ¼ej 500 tys. mieszkancÃ³w) w wojewÃ³dztwach Mazowieckim i DolnoÅ›lÄ…skim.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">haven</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggbeeswarm</span><span class="p">)</span><span class="w">

</span><span class="c1"># SkÄ…d wziÄ…Ä‡ dane z diagnozy? SprawdÅº tutaj:</span><span class="w">
</span><span class="c1"># https://stwur.github.io/STWUR//articles/przygotowania/</span><span class="w">
</span><span class="n">load</span><span class="p">(</span><span class="s2">"./Diagnoza_dane-master/osoby.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">dochod_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">woj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as_factor</span><span class="p">(</span><span class="n">osoby</span><span class="p">[[</span><span class="m">74</span><span class="p">]]),</span><span class="w">
           </span><span class="n">dochod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">osoby</span><span class="p">[[</span><span class="m">646</span><span class="p">]],</span><span class="w">
           </span><span class="n">miasto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">osoby</span><span class="p">[[</span><span class="m">75</span><span class="p">]])</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># wybieramy tylko osoby ktore maja podane informacje na temat dochodu i wojewÃ³dztwa</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">woj</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nf">is.na</span><span class="p">(</span><span class="n">dochod</span><span class="p">)))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="c1"># tylko osoby o dochodzie kodowanym zmiennymi wiÄ™kszymi niÅ¼ 0</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">dochod</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">dochod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="c1"># tylko interesujÄ…ce nas wojewÃ³dztwa</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">woj</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"DolnoÅ›lÄ…skie"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mazowieckie"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1"># tylko najwiÄ™ksze miasta</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">miasto</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="c1"># wykresy pudeÅ‚kowe w tym przypadku nam nie wystarczajÄ…, chcemy zobaczyÄ‡ poszczegÃ³lne punkty</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dochod_df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">woj</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_boxplot</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<p><img src="/images/STWUR/beeswarm/figure/beeswarm-1.png" alt="plot of chunk beeswarm" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># przy zwykÅ‚ym wykresie punkty nachodzÄ… na siebie</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dochod_df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">woj</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<p><img src="/images/STWUR/beeswarm/figure/beeswarm-2.png" alt="plot of chunk beeswarm" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># losowe umiejscowienie punktÃ³w jest maÅ‚o informatywne, punkty wciÄ…Å¼ czasami nachodzÄ… na siebie</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dochod_df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">woj</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"jitter"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<p><img src="/images/STWUR/beeswarm/figure/beeswarm-3.png" alt="plot of chunk beeswarm" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># pseudolosowe umiejscowienie punktÃ³w jest duÅ¼o bardziej przejrzyste</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dochod_df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">woj</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_quasirandom</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<p><img src="/images/STWUR/beeswarm/figure/beeswarm-4.png" alt="plot of chunk beeswarm" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># rÃ³j pszczÃ³Å‚ to alternatywny sposÃ³b pseudolosowego umiejscowienia punktÃ³w</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dochod_df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">woj</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dochod</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_beeswarm</span><span class="p">()</span><span class="w"> 
</span></code></pre></div></div>

<p><img src="/images/STWUR/beeswarm/figure/beeswarm-5.png" alt="plot of chunk beeswarm" /></p>
:ET